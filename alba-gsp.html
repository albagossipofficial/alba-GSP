<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ALBA GOSSIP</title>
  <link rel="stylesheet" href="style-new.css" />
</head>
<body>
  <header class="navbar" id="header">
    <div class="logo-left"><img src="svg/logo-alba-gossip.svg" alt="ALBA GOSSIP"></div>
    <button class="menu-btn" id="menu-btn" aria-label="Apri menu">
      <span></span><span></span><span></span>
    </button>
  </header>

  <div class="overlay" id="overlay" aria-hidden="true"></div>

  <nav class="sidebar" id="sidebar" aria-hidden="true">
    <a href="alba-gsp.html" class="active">ALBA GSP</a>
    <a href="storia-del-giorno.html">STORIA DEL GIORNO</a>
    <a href="contatti.html">CONTATTI</a>
    <a href="#">TERMINI Dâ€™USO</a>
    <a href="#">PRIVACY E POLICY</a>
  </nav>

  <main role="main" id="main">
    <div class="main-content">
      <div class="logo-center"><img src="svg/logo-alba-gossip.svg" alt="ALBA GOSSIP"></div>

      <div class="input-area">
        <textarea placeholder="Scrivi un gossip..." aria-label="Scrivi un gossip"></textarea>
        <button class="send-btn">INVIA</button>
      </div>

      <a href="storia-del-giorno.html" class="story-box" role="link"><h2>STORIA DEL GIORNO</h2></a>
    </div>
  </main>

  <footer id="footer">
    <div class="footer-left">
      <img src="svg/logo-instagram.svg" alt="Instagram" class="icon"><span>@alba__gossip</span>
    </div>

    <div class="footer-center">
      <img src="svg/logo-alba-gossip.svg" alt="ALBA GOSSIP" class="footer-logo">
    </div>

    <div class="footer-right">
      <button id="theme-toggle" aria-label="Cambia tema" title="Cambia tema" aria-pressed="false">
        <!-- default moon icon -->
        <svg viewBox="0 0 24 24" fill="none"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor"/></svg>
      </button>
    </div>
  </footer>

  <script>
    // Elements
    const menuBtn = document.getElementById('menu-btn');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const themeToggle = document.getElementById('theme-toggle');
    const body = document.body;

    // Sidebar open/close
    function openSidebar(){
      sidebar.classList.add('open');
      overlay.classList.add('show');
      sidebar.setAttribute('aria-hidden','false');
      menuBtn.classList.add('active');
    }
    function closeSidebar(){
      sidebar.classList.remove('open');
      overlay.classList.remove('show');
      sidebar.setAttribute('aria-hidden','true');
      menuBtn.classList.remove('active');
    }
    menuBtn.addEventListener('click', () => {
      sidebar.classList.contains('open') ? closeSidebar() : openSidebar();
    });
    overlay.addEventListener('click', closeSidebar);

    // Theme handling + swap SVG
    function setDarkMode(on){
      body.classList.toggle('dark', on);
      themeToggle.setAttribute('aria-pressed', String(on));
      if(on){
        themeToggle.innerHTML = '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3v2M12 19v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4M12 7a5 5 0 100 10 5 5 0 000-10z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>';
      } else {
        themeToggle.innerHTML = '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor"/></svg>';
      }
    }

    // Load saved theme
    const saved = localStorage.getItem('theme') === 'dark';
    setDarkMode(saved);

    themeToggle.addEventListener('click', () => {
      const isDark = !body.classList.contains('dark');
      setDarkMode(isDark);
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    // close sidebar on ESC
    window.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && sidebar.classList.contains('open')) closeSidebar();
    });

    // Prevent accidental page scroll with touch (mobile)
    document.addEventListener('touchmove', function(e){
      if(sidebar.classList.contains('open')) e.preventDefault(); // when sidebar open avoid background scroll
    }, { passive: false });
  </script>
</body>
</html>
